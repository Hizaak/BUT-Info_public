import pandas as pd
import pyodbc
cnxn = pyodbc.connect("DSN=lakartxela")
import matplotlib.pyplot as plt
cursor = cnxn.cursor()


param=['Jour férié : Fête Nationale','Jour férié : Noël','Jour férié : Armistice']
frame=[]
for date in param:
    commande_incrayable=f"""SELECT hour(date) as heure, COUNT(*)as nb from Informmations where `commentaire de la date` = '{date}' GROUP BY HOUR(date)"""
    sql_query = pd.read_sql_query (commande_incrayable,cnxn)
    frame.append(pd.DataFrame(sql_query))

i=0
for df in frame:
    plt.plot(df['heure'], df['nb'],label=param[i][13:])
    i=i+1
plt.xticks([x for x in range(0,24)])
for i in range(24): 
    plt.vlines(x=i, ymin=0, ymax=9, colors='#DBDBDB', lw=0.7)
for i in range(0,9,2): 
    plt.hlines(y=i, xmin=0, xmax=24, colors='#DBDBDB', lw=0.7)
plt.legend(bbox_to_anchor=(1.012, 1.15))
plt.show()